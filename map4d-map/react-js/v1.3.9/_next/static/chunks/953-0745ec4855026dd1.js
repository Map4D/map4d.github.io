"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[953],{5953:function(t,e,n){n.d(e,{I7:function(){return m},In:function(){return h},N$:function(){return v},RM:function(){return g},Z5:function(){return s},_A:function(){return f},cX:function(){return E},fy:function(){return M},iG:function(){return k},ni:function(){return C},t8:function(){return l},tU:function(){return x},ul:function(){return d},xt:function(){return y}});var r,i,o=n(7294),u=(0,o.createContext)({map:null}),a=(0,o.createContext)({addMarker:null,removeMarker:null}),l=function(t){var e=t.position,n=t.name,r=t.scale,i=void 0===r?1:r,a=t.bearing,l=void 0===a?0:a,c=t.elevation,s=void 0===c?0:c,d=t.height,f=void 0===d?1:d,v=t.model,h=t.texture,p=t.coordinates,E=t.visible,M=void 0===E||E,m=t.draggable,k=void 0!==m&&m,g=t.clickable,y=void 0===g||g,C=t.selected,x=void 0!==C&&C,b=t.growUp,O=void 0===b||b,I=t.map,w=t.onCreated,L=(0,o.useContext)(u),R=I||L.map,A=(0,o.useRef)(null);return(0,o.useEffect)(function(){if(R&&!A.current&&(p&&(null==p?void 0:p.length)>0||v)){var t,r={position:e||{lat:10.793113,lng:106.720739},name:n,scale:i,bearing:l,elevation:s,height:f,model:v,texture:h,coordinates:p,visible:M,draggable:k,clickable:y,selected:x,growUp:O};Object.keys(r).forEach(function(t){(void 0==r[t]||null==r[t])&&delete r[t]}),A.current=new map4d.Building(r),null===(t=A.current)||void 0===t||t.setMap(R),w&&w(A.current)}},[R,e,p,v]),(0,o.useEffect)(function(){if(R){var t;null===(t=A.current)||void 0===t||t.setMap(R)}return function(){var t;null===(t=A.current)||void 0===t||t.setMap(null)}},[R]),(0,o.useEffect)(function(){return function(){var t;null===(t=A.current)||void 0===t||t.setMap(null)}},[]),(0,o.useEffect)(function(){var t;null===(t=A.current)||void 0===t||t.setPosition(e)},[e]),(0,o.useEffect)(function(){var t;null===(t=A.current)||void 0===t||t.setName(n)},[n]),(0,o.useEffect)(function(){var t;null===(t=A.current)||void 0===t||t.setScale(i)},[i]),(0,o.useEffect)(function(){var t;null===(t=A.current)||void 0===t||t.setBearing(l)},[l]),(0,o.useEffect)(function(){var t;null===(t=A.current)||void 0===t||t.setElevation(s)},[s]),(0,o.useEffect)(function(){var t;null===(t=A.current)||void 0===t||t.setHeight(f)},[f]),(0,o.useEffect)(function(){var t;null===(t=A.current)||void 0===t||t.setModel(v)},[v]),(0,o.useEffect)(function(){var t;null===(t=A.current)||void 0===t||t.setTexture(h)},[h]),(0,o.useEffect)(function(){var t;null===(t=A.current)||void 0===t||t.setCoordinates(p)},[p]),(0,o.useEffect)(function(){var t;null===(t=A.current)||void 0===t||t.setVisible(M)},[M]),(0,o.useEffect)(function(){var t;null===(t=A.current)||void 0===t||t.setDraggable(k)},[k]),(0,o.useEffect)(function(){var t;null===(t=A.current)||void 0===t||t.setClickable(y)},[y]),(0,o.useEffect)(function(){var t;null===(t=A.current)||void 0===t||t.setSelected(x)},[x]),(0,o.useEffect)(function(){var t;null===(t=A.current)||void 0===t||t.setGrowUp(O)},[O]),null},c=function(){};c.hasValue=function(t){return void 0!=t&&null!=t};var s=function(t){var e=t.center,n=t.radius,r=t.fillColor,i=void 0===r?"#0000FF":r,a=t.fillOpacity,l=void 0===a?1:a,s=t.visible,d=void 0===s||s,f=t.strokeColor,v=void 0===f?"#00FF00":f,h=t.strokeWidth,p=t.draggable,E=t.zIndex,M=t.elevation,m=t.clickable,k=t.map,g=t.onCreated,y=t.onClick,C=(0,o.useContext)(u),x=k||C.map,b=(0,o.useRef)();return(0,o.useEffect)(function(){if(x&&!b.current){var t,r={center:e||{lat:10.793113,lng:106.720739},radius:n,fillColor:i,fillOpacity:l,visible:d,strokeColor:v,strokeWidth:h,draggable:p,zIndex:E,elevation:M,clickable:m};Object.keys(r).forEach(function(t){(void 0==r[t]||null==r[t])&&delete r[t]}),b.current=new map4d.Circle(r),null===(t=b.current)||void 0===t||t.setMap(x),g&&g(b.current),b.current.onClick=y}},[x]),(0,o.useEffect)(function(){b.current&&(b.current.onClick=y)},[y]),(0,o.useEffect)(function(){if(x){var t;null===(t=b.current)||void 0===t||t.setMap(x)}return function(){var t;null===(t=b.current)||void 0===t||t.setMap(null)}},[x]),(0,o.useEffect)(function(){return function(){var t;null===(t=b.current)||void 0===t||t.setMap(null)}},[]),(0,o.useEffect)(function(){if(c.hasValue(e)){var t;null===(t=b.current)||void 0===t||t.setCenter(e)}},[e]),(0,o.useEffect)(function(){if(c.hasValue(n)){var t;null===(t=b.current)||void 0===t||t.setRadius(n)}},[n]),(0,o.useEffect)(function(){if(c.hasValue(i)){var t;null===(t=b.current)||void 0===t||t.setFillColor(i)}},[i]),(0,o.useEffect)(function(){if(c.hasValue(l)){var t;null===(t=b.current)||void 0===t||t.setFillOpacity(l)}},[l]),(0,o.useEffect)(function(){if(c.hasValue(d)){var t;null===(t=b.current)||void 0===t||t.setVisible(d)}},[d]),(0,o.useEffect)(function(){if(c.hasValue(v)){var t;null===(t=b.current)||void 0===t||t.setStrokeColor(v)}},[v]),(0,o.useEffect)(function(){if(c.hasValue(h)){var t;null===(t=b.current)||void 0===t||t.setStrokeWidth(h)}},[h]),(0,o.useEffect)(function(){if(c.hasValue(p)){var t;null===(t=b.current)||void 0===t||t.setDraggable(p)}},[p]),(0,o.useEffect)(function(){if(c.hasValue(E)){var t;null===(t=b.current)||void 0===t||t.setZIndex(E)}},[E]),(0,o.useEffect)(function(){if(c.hasValue(M)){var t;null===(t=b.current)||void 0===t||t.setElevation(M)}},[M]),(0,o.useEffect)(function(){if(c.hasValue(m)){var t;null===(t=b.current)||void 0===t||t.setClickable(m)}},[m]),null},d=function(t){var e=t.geoJsonString,n=t.map,r=t.onCreated,i=(0,o.useContext)(u),a=n||i.map,l=(0,o.useRef)(),c=function(){var t,n;null===(t=l.current)||void 0===t||t.forEach(function(t){var e;null==a||null===(e=a.data)||void 0===e||e.remove(t)}),l.current=null==a?void 0:null===(n=a.data)||void 0===n?void 0:n.addGeoJson(e),r&&r(l.current)};return(0,o.useEffect)(function(){a&&c()},[a]),(0,o.useEffect)(function(){return function(){var t;null===(t=l.current)||void 0===t||t.forEach(function(t){var e;null==a||null===(e=a.data)||void 0===e||e.remove(t)})}},[]),null},f=function(t){var e=t.routes,n=t.activedIndex,r=t.activeStrokeWidth,i=t.activeStrokeColor,a=t.activeOutlineWidth,l=t.activeOutlineColor,c=t.activeStrokePattern,s=t.inactiveStrokeWidth,d=t.inactiveStrokeColor,f=t.inactiveOutlineWidth,v=t.inactiveOutlineColor,h=t.inactiveStrokePattern,p=t.originMarkerOptions,E=t.destinationMarkerOptions,M=t.waypointMarkerOptions,m=t.onMarkerDragEnd,k=t.map,g=t.onHover,y=t.onCreated,C=t.onMouseOut,x=t.onMouseOver,b=t.onMouseMove,O=(0,o.useContext)(u),I=k||O.map,w=(0,o.useRef)();return(0,o.useEffect)(function(){if(I&&!w.current){var o,u={routes:e,activedIndex:n,activeStrokeWidth:r,activeStrokeColor:i,activeOutlineWidth:a,activeOutlineColor:l,activeStrokePattern:c,inactiveStrokeWidth:s,inactiveStrokeColor:d,inactiveOutlineWidth:f,inactiveOutlineColor:v,inactiveStrokePattern:h,originMarkerOptions:p,destinationMarkerOptions:E,waypointMarkerOptions:M,onMarkerDragEnd:m};Object.keys(u).forEach(function(t){(void 0==u[t]||null==u[t])&&delete u[t]}),w.current=new map4d.DirectionsRenderer(u),null===(o=w.current)||void 0===o||o.setMap(I),w.current.onHover=t.onHover,w.current.onMouseOut=C,w.current.onMouseOver=x,w.current.onMouseMove=b,y&&y(w.current)}return function(){var t;null===(t=w.current)||void 0===t||t.setMap(null)}},[I]),(0,o.useEffect)(function(){w.current&&(w.current.onHover=g)},[g]),(0,o.useEffect)(function(){w.current&&(w.current.onMouseOut=C)},[C]),(0,o.useEffect)(function(){w.current&&(w.current.onMouseOver=x)},[x]),(0,o.useEffect)(function(){w.current&&(w.current.onMouseMove=b)},[b]),(0,o.useEffect)(function(){if(I){var t;null===(t=w.current)||void 0===t||t.setMap(I)}return function(){var t;null===(t=w.current)||void 0===t||t.setMap(null)}},[I]),(0,o.useEffect)(function(){return function(){var t;null===(t=w.current)||void 0===t||t.setMap(null)}},[]),(0,o.useEffect)(function(){var t;void 0!=e&&(null===(t=w.current)||void 0===t||t.setRoutes(e))},[e]),(0,o.useEffect)(function(){var t;void 0!=n&&(null===(t=w.current)||void 0===t||t.setActivedIndex(n))},[n]),(0,o.useEffect)(function(){var t;void 0!=c&&(null===(t=w.current)||void 0===t||t.setActiveStrokePattern(c))},[c]),(0,o.useEffect)(function(){var t;void 0!=h&&(null===(t=w.current)||void 0===t||t.setInactiveStrokePattern(h))},[h]),(0,o.useEffect)(function(){var t,o={routes:e,activedIndex:n,activeStrokeWidth:r,activeStrokeColor:i,activeOutlineWidth:a,activeOutlineColor:l,activeStrokePattern:c,inactiveStrokeWidth:s,inactiveStrokeColor:d,inactiveOutlineWidth:f,inactiveOutlineColor:v,inactiveStrokePattern:h,originMarkerOptions:p,destinationMarkerOptions:E,waypointMarkerOptions:M,onMarkerDragEnd:m};Object.keys(o).forEach(function(t){(void 0==o[t]||null==o[t])&&delete o[t]}),null===(t=w.current)||void 0===t||t.setOptions(o)},[r,i,a,l,d,f,v,p,E,M,m]),null},v=function(t){var e=t.bounds,n=t.getUrl,r=t.override,i=t.visible,a=t.zIndex,l=t.opacity,c=t.map,s=t.onCreated,d=(0,o.useContext)(u),f=c||d.map,v=(0,o.useRef)(),h=function(){null===(t=v.current)||void 0===t||t.setMap(null);var t,o,u={bounds:e,getUrl:n,override:r,visible:i,zIndex:a,opacity:l};Object.keys(u).forEach(function(t){(void 0==u[t]||null==u[t])&&delete u[t]}),v.current=new map4d.TileOverlay(u),null===(o=v.current)||void 0===o||o.setMap(f),s&&s(v.current)};return(0,o.useEffect)(function(){f&&!v.current&&h()},[f]),(0,o.useEffect)(function(){if(f){var t;null===(t=v.current)||void 0===t||t.setMap(f)}return function(){var t;null===(t=v.current)||void 0===t||t.setMap(null)}},[f]),(0,o.useEffect)(function(){return function(){var t;null===(t=v.current)||void 0===t||t.setMap(null)}},[]),(0,o.useEffect)(function(){f&&h()},[e,n,r]),(0,o.useEffect)(function(){var t;void 0!=i&&(null===(t=v.current)||void 0===t||t.setVisible(i))},[i]),(0,o.useEffect)(function(){var t;void 0!=a&&(null===(t=v.current)||void 0===t||t.setZIndex(a))},[a]),(0,o.useEffect)(function(){var t;void 0!=l&&(null===(t=v.current)||void 0===t||t.setOpacity(l))},[l]),null},h=function(t){var e=t.url,n=t.bounds,r=t.visible,i=t.zIndex,a=t.opacity,l=t.map,c=t.onCreated,s=(0,o.useContext)(u),d=l||s.map,f=(0,o.useRef)(),v=function(){null===(t=f.current)||void 0===t||t.setMap(null);var t,o,u={url:e,bounds:n,visible:r,zIndex:i,opacity:a};Object.keys(u).forEach(function(t){(void 0==u[t]||null==u[t])&&delete u[t]}),f.current=new map4d.ImageOverlay(u),null===(o=f.current)||void 0===o||o.setMap(d),c&&c(f.current)};return(0,o.useEffect)(function(){d&&!f.current&&v()},[d]),(0,o.useEffect)(function(){if(d){var t;null===(t=f.current)||void 0===t||t.setMap(d)}return function(){var t;null===(t=f.current)||void 0===t||t.setMap(null)}},[d]),(0,o.useEffect)(function(){return function(){var t;null===(t=f.current)||void 0===t||t.setMap(null)}},[]),(0,o.useEffect)(function(){d&&v()},[e,n,i]),(0,o.useEffect)(function(){var t;void 0!=r&&(null===(t=f.current)||void 0===t||t.setVisible(r))},[r]),(0,o.useEffect)(function(){var t;void 0!=a&&(null===(t=f.current)||void 0===t||t.setOpacity(a))},[a]),null},p=function(){var t=new Date().getTime();return"xxxxxxxx_xxxx_4xxx_yxxx_xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)})},E=function(t){var e,n,r=(0,o.useRef)({options:t.options,mapId:t.mapid,version:t.version,environment:t.environment,accessKey:t.accessKey,sdkDomain:t.sdkDomain}),i=(0,o.useRef)("callback"),a=(0,o.useRef)(),l=(0,o.useRef)(),c=(0,o.useRef)(),s=(0,o.useRef)(),d=(0,o.useRef)([]),f=t.zoom,v=t.bearing,h=t.center,E=t.tilt,M=(0,o.useState)(),m=M[0],k=M[1];(0,o.useEffect)(function(){if(m){var t=m.getCamera();void 0!=f&&null!=f&&t.setZoom(f),void 0!=v&&null!=v&&t.setBearing(v),void 0!=h&&null!=h&&t.setTarget(h),void 0!=E&&null!=E&&t.setTilt(h),m.moveCamera(t)}},[f,v,h,m]),(0,o.useEffect)(function(){var e=p();i.current="callback_"+e;var n="https://api"+(t.environment?"-"+r.current.environment:"")+".map4d.vn";r.current.sdkDomain&&(n=r.current.sdkDomain);var o=n+"/sdk/map/js?version="+r.current.version+"&key="+r.current.accessKey+"&callback="+i.current;r.current.mapId&&(o+="&mapId="+r.current.mapId),window[i.current]=function(){l.current=new window.map4d.Map(a.current,r.current.options),t.onMapReady&&t.onMapReady(l.current,e),g(),k(l.current)};var u=function(t,e){var n="script_"+e;if(document.getElementById(n))return null;var r=document.createElement("script");return r.src=t,r.defer=!0,r.id=n,document.body.appendChild(r),r}(o,e);return u&&(c.current=u),s.current=o,function(){var t,e;delete window[i.current],null!=c.current&&c.current.remove(),null===(t=d.current)||void 0===t||t.forEach(function(t){null==t||t.remove()}),null===(e=l.current)||void 0===e||e.destroy(),s.current=void 0}},[t.environment,t.version,t.accessKey]),(0,o.useEffect)(function(){var e,n,r;(null===(e=t.options)||void 0===e?void 0:e.mapType)!=void 0&&(null===(n=l.current)||void 0===n||n.setMapType(null===(r=t.options)||void 0===r?void 0:r.mapType))},[null===(e=t.options)||void 0===e?void 0:e.mapType]),(0,o.useEffect)(function(){var e,n,r,i;if((null===(e=t.options)||void 0===e?void 0:e.center)!=void 0){var o,u,a,c=null===(o=l.current)||void 0===o?void 0:o.getCamera();null==c||c.setTarget(null===(u=t.options)||void 0===u?void 0:u.center),null===(a=l.current)||void 0===a||a.moveCamera(c)}(null===(n=t.options)||void 0===n?void 0:n.mapType)!=void 0&&(null===(r=l.current)||void 0===r||r.setMapType(null===(i=t.options)||void 0===i?void 0:i.mapType))},[null===(n=t.options)||void 0===n?void 0:n.center]);var g=function(){var e=null===(C=l.current)||void 0===C?void 0:C.addListener("click",function(t){var e,n;(null===(e=t.marker)||void 0===e?void 0:e.onClick)&&(null===(n=t.marker)||void 0===n||n.onClick(t))},{marker:!0}),n=null===(x=l.current)||void 0===x?void 0:x.addListener("rightClick",function(t){var e,n;(null===(e=t.marker)||void 0===e?void 0:e.onRightClick)&&(null===(n=t.marker)||void 0===n||n.onRightClick(t))},{marker:!0}),r=null===(b=l.current)||void 0===b?void 0:b.addListener("dragEnd",function(t){var e,n;(null===(e=t.marker)||void 0===e?void 0:e.onDragEnd)&&(null===(n=t.marker)||void 0===n||n.onDragEnd(t))},{marker:!0}),i=null===(O=l.current)||void 0===O?void 0:O.addListener("hover",function(t){var e,n;(null===(e=t.marker)||void 0===e?void 0:e.onHover)&&(null===(n=t.marker)||void 0===n||n.onHover(t))},{marker:!0}),o=null===(I=l.current)||void 0===I?void 0:I.addListener("hover",function(t){var e,n;(null===(e=t.polygon)||void 0===e?void 0:e.onHover)&&(null===(n=t.polygon)||void 0===n||n.onHover(t))},{polygon:!0}),u=null===(w=l.current)||void 0===w?void 0:w.addListener("hover",function(t){var e,n;(null===(e=t.polyline)||void 0===e?void 0:e.onHover)&&(null===(n=t.polyline)||void 0===n||n.onHover(t))},{polyline:!0}),a=null===(L=l.current)||void 0===L?void 0:L.addListener("hover",function(t){var e,n;(null===(e=t.renderer)||void 0===e?void 0:e.onHover)&&(null===(n=t.renderer)||void 0===n||n.onHover(t))},{directions:!0}),c=null===(R=l.current)||void 0===R?void 0:R.addListener("click",function(t){var e,n;(null===(e=t.polyline)||void 0===e?void 0:e.onClick)&&(null===(n=t.polyline)||void 0===n||n.onClick(t))},{polyline:!0}),s=null===(A=l.current)||void 0===A?void 0:A.addListener("mouseOut",function(t){var e,n;(null===(e=t.renderer)||void 0===e?void 0:e.onMouseOut)&&(null===(n=t.renderer)||void 0===n||n.onMouseOut(t))},{directions:!0}),f=null===(T=l.current)||void 0===T?void 0:T.addListener("mouseOver",function(t){var e,n;(null===(e=t.renderer)||void 0===e?void 0:e.onMouseOver)&&(null===(n=t.renderer)||void 0===n||n.onMouseOver(t))},{directions:!0}),v=null===(P=l.current)||void 0===P?void 0:P.addListener("mouseMove",function(t){var e,n;(null===(e=t.renderer)||void 0===e?void 0:e.onMouseMove)&&(null===(n=t.renderer)||void 0===n||n.onMouseMove(t))},{directions:!0}),h=null===(S=l.current)||void 0===S?void 0:S.addListener("mouseOut",function(t){var e,n;(null===(e=t.polyline)||void 0===e?void 0:e.onMouseOut)&&(null===(n=t.polyline)||void 0===n||n.onMouseOut(t))},{polyline:!0}),p=null===(z=l.current)||void 0===z?void 0:z.addListener("mouseOver",function(t){var e,n;(null===(e=t.polyline)||void 0===e?void 0:e.onMouseOver)&&(null===(n=t.polyline)||void 0===n||n.onMouseOver(t))},{polyline:!0}),E=null===(F=l.current)||void 0===F?void 0:F.addListener("mouseMove",function(t){var e,n;(null===(e=t.polyline)||void 0===e?void 0:e.onMouseMove)&&(null===(n=t.polyline)||void 0===n||n.onMouseMove(t))},{polyline:!0}),M=null===(H=l.current)||void 0===H?void 0:H.addListener("mouseOut",function(t){var e,n;(null===(e=t.marker)||void 0===e?void 0:e.onMouseOut)&&(null===(n=t.marker)||void 0===n||n.onMouseOut(t))},{marker:!0}),m=null===(D=l.current)||void 0===D?void 0:D.addListener("mouseOver",function(t){var e,n;(null===(e=t.marker)||void 0===e?void 0:e.onMouseOver)&&(null===(n=t.marker)||void 0===n||n.onMouseOver(t))},{marker:!0}),k=null===(W=l.current)||void 0===W?void 0:W.addListener("mouseMove",function(t){var e,n;(null===(e=t.marker)||void 0===e?void 0:e.onMouseMove)&&(null===(n=t.marker)||void 0===n||n.onMouseMove(t))},{marker:!0}),g=null===(_=l.current)||void 0===_?void 0:_.addListener("click",function(t){var e,n;(null===(e=t.poi)||void 0===e?void 0:e.onClick)&&(null===(n=t.poi)||void 0===n||n.onClick(t))},{poi:!0}),y=null===(N=l.current)||void 0===N?void 0:N.addListener("hover",function(t){var e,n;(null===(e=t.poi)||void 0===e?void 0:e.onHover)&&(null===(n=t.poi)||void 0===n||n.onHover(t))},{poi:!0});if(d.current=d.current.concat([e,n,r,i,o,u,a,c,s,f,v,h,p,E,M,m,k,g,y,null===(V=l.current)||void 0===V?void 0:V.addListener("click",function(t){var e,n,r,i;(null===(e=t.circle)||void 0===e?void 0:e.onClick)&&(null===(n=t.circle)||void 0===n||n.onClick(t)),null===(r=t.polygon)||void 0===r||null===(i=r.onClick)||void 0===i||i.call(r,t)},{circle:!0,polygon:!0})]),t.onClickLocation){var C,x,b,O,I,w,L,R,A,T,P,S,z,F,H,D,W,_,N,V,U,Z=null===(U=l.current)||void 0===U?void 0:U.addListener("click",function(e){t.onClickLocation&&t.onClickLocation(e)},{location:!0});d.current.push(Z)}if(t.onRightClickLocation){var B,G=null===(B=l.current)||void 0===B?void 0:B.addListener("rightClick",function(e){t.onRightClickLocation&&t.onRightClickLocation(e)},{location:!0});d.current.push(G)}if(t.onTilesLoaded){var j,Y=null===(j=l.current)||void 0===j?void 0:j.addListener("tilesLoaded",function(e){t.onTilesLoaded&&t.onTilesLoaded(e)},{location:!0});d.current.push(Y)}if(t.onCameraChanging){var K,J=null===(K=l.current)||void 0===K?void 0:K.addListener("cameraChanging",function(e){t.onCameraChanging&&t.onCameraChanging(e)},{location:!0});d.current.push(J)}};return o.createElement(o.Fragment,null,o.createElement("div",{style:{width:"100%",height:"100%",display:"block"},ref:a}),o.createElement(u.Provider,{value:{map:m}},t.children))},M=function(t){var e=t.position,n=t.visible,r=void 0===n||n,i=t.anchor,l=t.labelAnchor,s=t.icon,d=t.elevation,f=t.rotation,v=t.title,h=t.snippet,p=t.windowAnchor,E=t.zIndex,M=t.label,m=t.draggable,k=t.iconView,g=t.clickable,y=t.map,C=t.onCreated,x=t.onClick,b=t.onRightClick,O=t.onDragEnd,I=t.onHover,w=t.onMouseOut,L=t.onMouseOver,R=t.onMouseMove,A=(0,o.useContext)(u),T=(0,o.useContext)(a),P=y||A.map,S=(0,o.useRef)();return(0,o.useEffect)(function(){if(P&&!S.current){var n,o,u={position:e||{lat:10.793113,lng:106.720739},visible:r,anchor:i,labelAnchor:l,elevation:d,rotation:f,title:v,snippet:h,windowAnchor:p,zIndex:E,label:"string"==typeof M?M:new map4d.MarkerLabel(M),draggable:m,iconView:k,clickable:g};if(Object.keys(u).forEach(function(t){(void 0==u[t]||null==u[t])&&delete u[t]}),s){var a=new map4d.Icon(s.width,s.height,s.url);u.icon=a}S.current=new map4d.Marker(u),void 0!=t.infoWindow&&S.current.setInfoWindow(t.infoWindow),void 0!=t.infoContents&&S.current.setInfoContents(t.infoContents),null!=T&&T.addMarker||S.current.setMap(P),void 0!=t.showInfoWindow&&(t.showInfoWindow?null===(n=S.current)||void 0===n||n.showInfoWindow():null===(o=S.current)||void 0===o||o.hideInfoWindow()),S.current.onClick=x,S.current.onRightClick=t.onRightClick,S.current.onDragEnd=t.onDragEnd,S.current.onHover=t.onHover,S.current.onMouseOut=w,S.current.onMouseOver=L,S.current.onMouseMove=R,C&&C(S.current),(null==T?void 0:T.addMarker)&&(null==T||T.addMarker(S.current))}},[P]),(0,o.useEffect)(function(){if(P&&!(null!=T&&T.addMarker)){var t;null===(t=S.current)||void 0===t||t.setMap(P)}return function(){if(!(null!=T&&T.addMarker)){var t;null===(t=S.current)||void 0===t||t.setMap(null)}}},[P]),(0,o.useEffect)(function(){return function(){if(!(null!=T&&T.addMarker)){var t;null===(t=S.current)||void 0===t||t.setMap(null)}S.current&&(null==T?void 0:T.removeMarker)&&(null==T||T.removeMarker(S.current))}},[]),(0,o.useEffect)(function(){S.current&&(S.current.onHover=I)},[I]),(0,o.useEffect)(function(){S.current&&(S.current.onMouseOut=w)},[w]),(0,o.useEffect)(function(){S.current&&(S.current.onMouseOver=L)},[L]),(0,o.useEffect)(function(){S.current&&(S.current.onMouseMove=R)},[R]),(0,o.useEffect)(function(){S.current&&(S.current.onClick=x)},[x]),(0,o.useEffect)(function(){S.current&&(S.current.onRightClick=b)},[b]),(0,o.useEffect)(function(){S.current&&(S.current.onHover=O)},[O]),(0,o.useEffect)(function(){var t;null===(t=S.current)||void 0===t||t.setPosition(e)},[e]),(0,o.useEffect)(function(){var t;null===(t=S.current)||void 0===t||t.setVisible(r)},[r]),(0,o.useEffect)(function(){var t;void 0!=i&&(null===(t=S.current)||void 0===t||t.setAnchor(i))},[i]),(0,o.useEffect)(function(){var t;void 0!=l&&(null===(t=S.current)||void 0===t||t.setLabelAnchor(l))},[l]),(0,o.useEffect)(function(){var t;void 0!=s&&(null===(t=S.current)||void 0===t||t.setIcon(s))},[s]),(0,o.useEffect)(function(){var t;void 0!=d&&(null===(t=S.current)||void 0===t||t.setElevation(d))},[d]),(0,o.useEffect)(function(){var t;void 0!=f&&(null===(t=S.current)||void 0===t||t.setRotation(f))},[f]),(0,o.useEffect)(function(){var t;void 0!=v&&(null===(t=S.current)||void 0===t||t.setTitle(v))},[v]),(0,o.useEffect)(function(){var t;void 0!=h&&(null===(t=S.current)||void 0===t||t.setSnippet(h))},[h]),(0,o.useEffect)(function(){var t;void 0!=p&&(null===(t=S.current)||void 0===t||t.setWindowAnchor(p))},[p]),(0,o.useEffect)(function(){var t;void 0!=E&&(null===(t=S.current)||void 0===t||t.setZIndex(E))},[E]),(0,o.useEffect)(function(){if(P&&c.hasValue(M)){var t,e="string"==typeof M?M:new map4d.MarkerLabel(M);null===(t=S.current)||void 0===t||t.setLabel(e)}},[M]),(0,o.useEffect)(function(){var t;void 0!=m&&(null===(t=S.current)||void 0===t||t.setDraggable(m))},[m]),(0,o.useEffect)(function(){var t;void 0!=k&&(null===(t=S.current)||void 0===t||t.setIconView(k))},[k]),(0,o.useEffect)(function(){var t;void 0!=g&&(null===(t=S.current)||void 0===t||t.setClickable(g))},[g]),(0,o.useEffect)(function(){var t;void 0!=s&&(null===(t=S.current)||void 0===t||t.setIcon(new map4d.Icon(s.width,s.height,s.url)))},[s]),(0,o.useEffect)(function(){var e;void 0!=t.infoWindow&&(null===(e=S.current)||void 0===e||e.setInfoWindow(t.infoWindow))},[t.infoWindow]),(0,o.useEffect)(function(){var e;void 0!=t.infoContents&&(null===(e=S.current)||void 0===e||e.setInfoContents(t.infoContents))},[t.infoContents]),(0,o.useEffect)(function(){if(void 0!=t.showInfoWindow){var e,n;t.showInfoWindow?null===(e=S.current)||void 0===e||e.showInfoWindow():null===(n=S.current)||void 0===n||n.hideInfoWindow()}},[t.showInfoWindow]),null},m=function(t){var e=t.minZoom,n=void 0===e?0:e,r=t.maxZoom,i=void 0===r?22:r,l=t.radius,c=void 0===l?100:l,s=t.zoomOnClick,d=t.clusterIcon,f=t.map,v=t.onCreated,h=(0,o.useContext)(u),p=f||h.map,E=(0,o.useRef)([]),M=(0,o.useRef)(),m=function(){var t;if(null===(t=M.current)||void 0===t||t.setMap(null),p){var e,r,o={minZoom:n,maxZoom:i,radius:c,zoomOnClick:s,clusterIcon:d};Object.keys(o).forEach(function(t){(void 0==o[t]||null==o[t])&&delete o[t]}),E.current&&(null===(e=E.current)||void 0===e?void 0:e.length)>0&&(M.current=new map4d.MarkerClusterer(E.current,o),null===(r=M.current)||void 0===r||r.setMap(p),v&&v(M.current))}};return(0,o.useEffect)(function(){p&&!M.current&&m()},[p]),(0,o.useEffect)(function(){if(p){var t;null===(t=M.current)||void 0===t||t.setMap(p)}return function(){var t;null===(t=M.current)||void 0===t||t.setMap(null)}},[p]),(0,o.useEffect)(function(){return function(){var t;null===(t=M.current)||void 0===t||t.setMap(null)}},[]),(0,o.useEffect)(function(){p&&m()},[n,i,c,d]),(0,o.useEffect)(function(){var t;void 0!=s&&(null===(t=M.current)||void 0===t||t.setZoomOnClick(s))},[s]),o.createElement(a.Provider,{value:{addMarker:function(t){E.current.push(t),m()},removeMarker:function(t){var e=E.current.filter(function(e){return e!=t});E.current=e,m()}}},null==t?void 0:t.children)},k=function(t){var e=t.position,n=t.title,r=t.subtitle,i=t.color,a=t.type,l=t.icon,c=t.elevation,s=t.zIndex,d=t.visible,f=t.draggable,v=t.clickable,h=t.map,p=t.onCreated,E=t.onClick,M=t.onHover,m=(0,o.useContext)(u),k=h||m.map,g=(0,o.useRef)();return(0,o.useEffect)(function(){if(k&&!g.current){var t,o={position:e||{lat:10.793113,lng:106.720739},title:n,subtitle:r,color:i,type:a,icon:l,elevation:c,zIndex:s,visible:d,draggable:f,clickable:v};Object.keys(o).forEach(function(t){(void 0==o[t]||null==o[t])&&delete o[t]}),g.current=new map4d.POI(o),g.current.onClick=E,g.current.onHover=M,null===(t=g.current)||void 0===t||t.setMap(k),p&&p(g.current)}},[k]),(0,o.useEffect)(function(){if(k){var t;null===(t=g.current)||void 0===t||t.setMap(k)}return function(){var t;null===(t=g.current)||void 0===t||t.setMap(null)}},[k]),(0,o.useEffect)(function(){return function(){var t;null===(t=g.current)||void 0===t||t.setMap(null)}},[]),(0,o.useEffect)(function(){var t;null===(t=g.current)||void 0===t||t.setPosition(e)},[e]),(0,o.useEffect)(function(){var t;void 0!=n&&(null===(t=g.current)||void 0===t||t.setTitle(n))},[n]),(0,o.useEffect)(function(){var t;void 0!=r&&(null===(t=g.current)||void 0===t||t.setSubtitle(r))},[r]),(0,o.useEffect)(function(){var t;void 0!=i&&(null===(t=g.current)||void 0===t||t.setColor(i))},[i]),(0,o.useEffect)(function(){var t;void 0!=a&&(null===(t=g.current)||void 0===t||t.setType(a))},[a]),(0,o.useEffect)(function(){var t;void 0!=l&&(null===(t=g.current)||void 0===t||t.setIcon(l))},[l]),(0,o.useEffect)(function(){var t;void 0!=c&&(null===(t=g.current)||void 0===t||t.setElevation(c))},[c]),(0,o.useEffect)(function(){var t;void 0!=s&&(null===(t=g.current)||void 0===t||t.setZIndex(s))},[s]),(0,o.useEffect)(function(){var t;void 0!=d&&(null===(t=g.current)||void 0===t||t.setVisible(d))},[d]),(0,o.useEffect)(function(){var t;void 0!=f&&(null===(t=g.current)||void 0===t||t.setDraggable(f))},[f]),(0,o.useEffect)(function(){var t;void 0!=v&&(null===(t=g.current)||void 0===t||t.setClickable(v))},[v]),(0,o.useEffect)(function(){g.current&&(g.current.onClick=E)},[E]),(0,o.useEffect)(function(){g.current&&(g.current.onHover=M)},[M]),null},g=function(t){var e=t.getUrl,n=t.visible,r=void 0===n||n,i=t.parserData,a=t.prefixId,l=t.map,c=t.onCreated,s=(0,o.useContext)(u),d=l||s.map,f=(0,o.useRef)(),v=function(){null===(t=f.current)||void 0===t||t.setMap(null);var t,n,o={getUrl:e||{lat:10.793113,lng:106.720739},visible:r,parserData:i,prefixId:a};Object.keys(o).forEach(function(t){(void 0==o[t]||null==o[t])&&delete o[t]}),f.current=new map4d.POIOverlay(o),null===(n=f.current)||void 0===n||n.setMap(d),c&&c(f.current)};return(0,o.useEffect)(function(){d&&!f.current&&v()},[d]),(0,o.useEffect)(function(){if(d){var t;null===(t=f.current)||void 0===t||t.setMap(d)}return function(){var t;null===(t=f.current)||void 0===t||t.setMap(null)}},[d]),(0,o.useEffect)(function(){return function(){var t;null===(t=f.current)||void 0===t||t.setMap(null)}},[]),(0,o.useEffect)(function(){d&&v()},[e,i,a]),null},y=function(t){var e=t.paths,n=t.fillColor,r=t.fillOpacity,i=t.visible,a=void 0===i||i,l=t.strokeColor,c=t.strokeWidth,s=t.draggable,d=t.elevation,f=t.zIndex,v=t.clickable,h=t.map,p=t.onHover,E=t.onClick,M=t.onCreated,m=(0,o.useContext)(u),k=h||m.map,g=(0,o.useRef)(),y=(0,o.useRef)();return(0,o.useEffect)(function(){if(k&&!g.current){var i,o={paths:e,fillColor:n,fillOpacity:r,visible:a,strokeColor:l,strokeWidth:c,draggable:s,elevation:d,zIndex:f,clickable:v};Object.keys(o).forEach(function(t){(void 0==o[t]||null==o[t])&&delete o[t]}),g.current=new map4d.Polygon(o),y.current=k,console.log(y.current),null===(i=g.current)||void 0===i||i.setMap(k),g.current.onHover=t.onHover,g.current.onClick=E,M&&M(g.current)}},[k]),(0,o.useEffect)(function(){if(k){var t;null===(t=g.current)||void 0===t||t.setMap(k)}return function(){var t;null===(t=g.current)||void 0===t||t.setMap(null)}},[k]),(0,o.useEffect)(function(){return function(){var t;null===(t=g.current)||void 0===t||t.setMap(null)}},[]),(0,o.useEffect)(function(){g.current&&(g.current.onHover=p)},[p]),(0,o.useEffect)(function(){g.current&&(g.current.onClick=E)},[E]),(0,o.useEffect)(function(){var t;null===(t=g.current)||void 0===t||t.setPaths(e)},[e]),(0,o.useEffect)(function(){var t;void 0!=n&&(null===(t=g.current)||void 0===t||t.setFillColor(n))},[n]),(0,o.useEffect)(function(){var t;void 0!=r&&(null===(t=g.current)||void 0===t||t.setFillOpacity(r))},[r]),(0,o.useEffect)(function(){var t;null===(t=g.current)||void 0===t||t.setVisible(a)},[a]),(0,o.useEffect)(function(){var t;void 0!=l&&(null===(t=g.current)||void 0===t||t.setStrokeColor(l))},[l]),(0,o.useEffect)(function(){var t;void 0!=c&&(null===(t=g.current)||void 0===t||t.setStrokeWidth(c))},[c]),(0,o.useEffect)(function(){var t;void 0!=s&&(null===(t=g.current)||void 0===t||t.setDraggable(s))},[s]),(0,o.useEffect)(function(){var t;void 0!=d&&(null===(t=g.current)||void 0===t||t.setElevation(d))},[d]),(0,o.useEffect)(function(){var t;void 0!=f&&(null===(t=g.current)||void 0===t||t.setZIndex(f))},[f]),(0,o.useEffect)(function(){var t;void 0!=v&&(null===(t=g.current)||void 0===t||t.setClickable(v))},[v]),null},C=function(t){var e=t.path,n=t.strokeWidth,r=t.strokeColor,i=t.strokeOpacity,a=t.visible,l=void 0===a||a,c=t.closed,s=t.draggable,d=t.zIndex,f=t.elevation,v=t.strokePattern,h=t.clickable,p=t.map,E=t.onClick,M=t.onHover,m=t.onCreated,k=t.onMouseOut,g=t.onMouseOver,y=t.onMouseMove,C=(0,o.useContext)(u),x=p||C.map,b=(0,o.useRef)();return(0,o.useEffect)(function(){if(x&&!b.current){var o,u={path:e||{lat:10.793113,lng:106.720739},strokeWidth:n,strokeColor:r,strokeOpacity:i,visible:l,closed:c,draggable:s,zIndex:d,elevation:f,strokePattern:v,clickable:h};Object.keys(u).forEach(function(t){(void 0==u[t]||null==u[t])&&delete u[t]}),b.current=new map4d.Polyline(u),null===(o=b.current)||void 0===o||o.setMap(x),b.current.onHover=t.onHover,b.current.onClick=t.onClick,b.current.onMouseOut=k,b.current.onMouseOver=g,b.current.onMouseMove=y,m&&m(b.current)}},[x]),(0,o.useEffect)(function(){if(x){var t;null===(t=b.current)||void 0===t||t.setMap(x)}return function(){var t;null===(t=b.current)||void 0===t||t.setMap(null)}},[x]),(0,o.useEffect)(function(){return function(){var t;null===(t=b.current)||void 0===t||t.setMap(null)}},[]),(0,o.useEffect)(function(){b.current&&(b.current.onHover=M)},[M]),(0,o.useEffect)(function(){b.current&&(b.current.onMouseOut=k)},[k]),(0,o.useEffect)(function(){b.current&&(b.current.onMouseOver=g)},[g]),(0,o.useEffect)(function(){b.current&&(b.current.onMouseMove=y)},[y]),(0,o.useEffect)(function(){b.current&&(b.current.onClick=E)},[E]),(0,o.useEffect)(function(){var t;null===(t=b.current)||void 0===t||t.setPath(e)},[e]),(0,o.useEffect)(function(){var t;void 0!=n&&(null===(t=b.current)||void 0===t||t.setStrokeWidth(n))},[n]),(0,o.useEffect)(function(){var t;void 0!=r&&(null===(t=b.current)||void 0===t||t.setStrokeColor(r))},[r]),(0,o.useEffect)(function(){var t;void 0!=i&&(null===(t=b.current)||void 0===t||t.setStrokeOpacity(i))},[i]),(0,o.useEffect)(function(){var t;void 0!=l&&(null===(t=b.current)||void 0===t||t.setVisible(l))},[l]),(0,o.useEffect)(function(){var t;void 0!=c&&(null===(t=b.current)||void 0===t||t.setClosed(c))},[c]),(0,o.useEffect)(function(){var t;void 0!=s&&(null===(t=b.current)||void 0===t||t.setDraggable(s))},[s]),(0,o.useEffect)(function(){var t;void 0!=d&&(null===(t=b.current)||void 0===t||t.setZIndex(d))},[d]),(0,o.useEffect)(function(){var t;void 0!=f&&(null===(t=b.current)||void 0===t||t.setElevation(f))},[f]),(0,o.useEffect)(function(){var t;void 0!=v&&(null===(t=b.current)||void 0===t||t.setStrokePattern(v))},[v]),(0,o.useEffect)(function(){var t;void 0!=h&&(null===(t=b.current)||void 0===t||t.setClickable(h))},[h]),null},x=function(t){var e=t.getUrl,n=t.visible,r=void 0===n||n,i=t.zIndex,a=t.opacity,l=t.map,c=t.onCreated,s=(0,o.useContext)(u),d=l||s.map,f=(0,o.useRef)(),v=function(){null===(t=f.current)||void 0===t||t.setMap(null);var t,n,o={getUrl:e||{lat:10.793113,lng:106.720739},visible:r,zIndex:i,opacity:a};Object.keys(o).forEach(function(t){(void 0==o[t]||null==o[t])&&delete o[t]}),f.current=new map4d.TileOverlay(o),null===(n=f.current)||void 0===n||n.setMap(d),c&&c(f.current)};return(0,o.useEffect)(function(){d&&!f.current&&v()},[d]),(0,o.useEffect)(function(){if(d){var t;null===(t=f.current)||void 0===t||t.setMap(d)}return function(){var t;null===(t=f.current)||void 0===t||t.setMap(null)}},[d]),(0,o.useEffect)(function(){return function(){var t;null===(t=f.current)||void 0===t||t.setMap(null)}},[]),(0,o.useEffect)(function(){d&&v()},[e]),(0,o.useEffect)(function(){var t;null===(t=f.current)||void 0===t||t.setVisible(r)},[r]),(0,o.useEffect)(function(){var t;void 0!=i&&(null===(t=f.current)||void 0===t||t.setZIndex(i))},[i]),(0,o.useEffect)(function(){var t;void 0!=a&&(null===(t=f.current)||void 0===t||t.setOpacity(a))},[a]),null};function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var I=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}var e=t.prototype;return e.clone=function(){return new t(this.x,this.y,this.z)},e.buffer=function(){return new Float32Array([this.x,this.y,this.z])},e.normalize=function(){var e=this.length,n=0,r=0,i=0;return e>0&&(n=this.x/e,r=this.y/e,i=this.z/e),new t(n,r,i)},e.set=function(t){this.x=t.x,this.y=t.y,this.z=t.z},e.invert=function(){return new t(-this.x,-this.y,-this.z)},e.rotate90=function(){return new t(this.y,-this.x,this.z)},e.add=function(e){return new t(e.x+this.x,e.y+this.y,e.z+this.z)},e.subtract=function(e){return e?new t(this.x-e.x,this.y-e.y,this.z-e.z):this.clone()},e.multiply=function(e){return new t(e*this.x,e*this.y,e*this.z)},e.rotateBy=function(e){var n=Math.cos(e*Math.PI/180),r=Math.sin(e*Math.PI/180);return new t(this.x*n-this.y*r,this.x*r+this.y*n)},e.cross=function(e){return new t(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)},e.dot=function(t){return t.x*this.x+t.y*this.y+t.z*this.z},t.perp=function(e,n){return new t(n[1]-e[1],e[0]-n[0])},t.neg=function(e){return new t(-e.x,-e.y,-e.z)},O(t,[{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"lengthSq",get:function(){return this.x*this.x+this.y*this.y+this.z*this.z}}]),t}(),w=function(){function t(t){void 0===t&&(t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])),this.data=t}var e=t.prototype;return e.setIdentity=function(t,e,n){return void 0===t&&(t=1),void 0===e&&(e=1),void 0===n&&(n=1),this.data[0]=t,this.data[1]=0,this.data[2]=0,this.data[3]=0,this.data[4]=0,this.data[5]=e,this.data[6]=0,this.data[7]=0,this.data[8]=0,this.data[9]=0,this.data[10]=n,this.data[11]=0,this.data[12]=0,this.data[13]=0,this.data[14]=0,this.data[15]=1,this},e.copy=function(t){return this.data[0]=t.data[0],this.data[1]=t.data[1],this.data[2]=t.data[2],this.data[3]=t.data[3],this.data[4]=t.data[4],this.data[5]=t.data[5],this.data[6]=t.data[6],this.data[7]=t.data[7],this.data[8]=t.data[8],this.data[9]=t.data[9],this.data[10]=t.data[10],this.data[11]=t.data[11],this.data[12]=t.data[12],this.data[13]=t.data[13],this.data[14]=t.data[14],this.data[15]=t.data[15],this},t.translate=function(e,n,r){return void 0===r&&(r=0),new t(new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,n,r,1]))},e.translate=function(t,e,n){return void 0===n&&(n=0),this.data[12]+=t,this.data[13]+=e,this.data[14]+=n,this},t.rotateX=function(e){var n=Math.sin(e*=Math.PI/180),r=Math.cos(e);return new t(new Float32Array([1,0,0,0,0,r,n,0,0,-n,r,0,0,0,0,1]))},e.setRotationX=function(t){var e=Math.sin(t*=Math.PI/180),n=Math.cos(t);return this.setIdentity(),this.data[5]=n,this.data[6]=e,this.data[9]=-e,this.data[10]=n,this},e.rotateX=function(t){var e=Math.sin(t*=Math.PI/180),n=Math.cos(t),r=this.data[1],i=this.data[2];return this.data[1]=r*n-i*e,this.data[2]=r*e+i*n,r=this.data[5],i=this.data[6],this.data[5]=r*n-i*e,this.data[6]=r*e+i*n,r=this.data[9],i=this.data[10],this.data[9]=r*n-i*e,this.data[10]=r*e+i*n,r=this.data[13],i=this.data[14],this.data[13]=r*n-i*e,this.data[14]=r*e+i*n,this},t.rotateY=function(e){var n=Math.sin(e*=Math.PI/180),r=Math.cos(e);return new t(new Float32Array([r,0,n,0,0,1,0,0,-n,0,r,0,0,0,0,1]))},e.setRotationY=function(t){var e=Math.sin(t*=Math.PI/180),n=Math.cos(t);return this.setIdentity(),this.data[0]=n,this.data[2]=e,this.data[8]=-e,this.data[10]=n,this},e.rotateY=function(t){var e=Math.sin(t*=Math.PI/180),n=Math.cos(t),r=this.data[0],i=this.data[2];return this.data[0]=r*n-i*e,this.data[2]=r*e+i*n,r=this.data[4],i=this.data[6],this.data[4]=r*n-i*e,this.data[6]=r*e+i*n,r=this.data[8],i=this.data[10],this.data[8]=r*n-i*e,this.data[10]=r*e+i*n,r=this.data[12],i=this.data[14],this.data[12]=r*n-i*e,this.data[14]=r*e+i*n,this},t.rotateZ=function(e){var n=Math.sin(e*=Math.PI/180),r=Math.cos(e);return new t(new Float32Array([r,n,0,0,-n,r,0,0,0,0,1,0,0,0,0,1]))},e.setRotationZ=function(t){var e=Math.sin(t*=Math.PI/180),n=Math.cos(t);return this.setIdentity(),this.data[0]=n,this.data[1]=e,this.data[4]=-e,this.data[5]=n,this},e.rotateZ=function(t){var e=Math.sin(t*=Math.PI/180),n=Math.cos(t),r=this.data[0],i=this.data[1];return this.data[0]=r*n-i*e,this.data[1]=r*e+i*n,r=this.data[4],i=this.data[5],this.data[4]=r*n-i*e,this.data[5]=r*e+i*n,r=this.data[8],i=this.data[9],this.data[8]=r*n-i*e,this.data[9]=r*e+i*n,r=this.data[12],i=this.data[13],this.data[12]=r*n-i*e,this.data[13]=r*e+i*n,this},e.multiply=function(e){var n=new t(new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]));if(null==e)return n;for(var r=0;r<4;++r)for(var i=0;i<4;++i)for(var o=0;o<4;++o)n.data[4*r+o]+=this.data[4*r+i]*e.data[4*i+o];return n},t.ortho=function(e,n,r,i,o,u){return void 0===o&&(o=-100),void 0===u&&(u=100),new t(new Float32Array([2/(n-e),0,0,0,0,2/(i-r),0,0,0,0,-2/(u-o),0,-(e+n)/(n-e),-(i+r)/(i-r),-(o+u)/(o-u),1]))},e.setOrtho=function(t,e,n,r,i,o){return void 0===i&&(i=-100),void 0===o&&(o=100),this.data[0]=2/(e-t),this.data[1]=0,this.data[2]=0,this.data[3]=0,this.data[4]=0,this.data[5]=2/(r-n),this.data[6]=0,this.data[7]=0,this.data[8]=0,this.data[9]=0,this.data[10]=-2/(o-i),this.data[11]=-1,this.data[12]=-(t+e)/(e-t),this.data[13]=-(r+n)/(r-n),this.data[14]=-(i+o)/(i-o),this.data[15]=1,this},t.perspective=function(e,n,r,i){var o=Math.tan(e/2)*r,u=o*n;return t.frustum(-u,u,-o,o,r,i)},e.setPerspective=function(t,e,n,r){var i=Math.tan(t/2)*n,o=i*e;return this.setFrustum(-o,o,-i,i,n,r)},t.frustum=function(e,n,r,i,o,u){return void 0===o&&(o=-100),void 0===u&&(u=100),new t(new Float32Array([2*o/(n-e),0,0,0,0,2*o/(i-r),0,0,(n+e)/(n-e),(i+r)/(i-r),-(u+o)/(u-o),-1,0,0,-2*o*u/(u-o),0]))},e.setFrustum=function(t,e,n,r,i,o){void 0===i&&(i=-100),void 0===o&&(o=100),this.data[0]=2*i/(e-t),this.data[1]=0,this.data[2]=0,this.data[3]=0,this.data[4]=0,this.data[5]=2*i/(r-n),this.data[6]=0,this.data[7]=0,this.data[8]=(e+t)/(e-t),this.data[9]=(r+n)/(r-n),this.data[10]=-(o+i)/(o-i),this.data[11]=-1,this.data[12]=0,this.data[13]=0,this.data[14]=-2*i*o/(o-i),this.data[15]=0},e.transform=function(t,e){void 0===e&&(e=0);var n=this.data[0]*t.x+this.data[4]*t.y+this.data[8]*t.z+this.data[12]*e,r=this.data[1]*t.x+this.data[5]*t.y+this.data[9]*t.z+this.data[13]*e,i=this.data[2]*t.x+this.data[6]*t.y+this.data[10]*t.z+this.data[14]*e;return 0==(e=this.data[3]*t.x+this.data[7]*t.y+this.data[11]*t.z+this.data[15]*e)&&(e=1),new I(n/e,r/e,i/e)},e.buffer=function(){return this.data},e.inverse=function(){for(var e=this.data.slice(),n=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),r=0;r<4;++r){for(var i=r;i<4&&0==e[4*i+r];)++i;if(4==i||0==e[4*i+r])return console.log("Cannot calculate inverse, determinant is zero"),this;if(i!=r){var o=e.slice(4*r,(r+1)*4),u=e.slice(4*i,(i+1)*4);e.set(u,4*r),e.set(o,4*i);var a=n.slice(4*r,(r+1)*4),l=n.slice(4*i,(i+1)*4);n.set(l,4*r),n.set(a,4*i)}var c=e.slice(4*r,(r+1)*4),s=n.slice(4*r,(r+1)*4);for(i=0;i<4;++i){var d=e.slice(4*i,(i+1)*4),f=n.slice(4*i,(i+1)*4);if(i!=r){if(0!=d[r]){for(var v=-d[r]/c[r],h=r;h<4;++h)d[h]=d[h]+v*c[h];e.set(d,4*i);for(var p=0;p<4;++p)f[p]=f[p]+v*s[p];n.set(f,4*i)}}else{var E=c[r];if(0==E)return console.log("Cannot calculate inverse, determinant is zero"),this;for(var M=r;M<4;++M)d[M]=d[M]/E;e.set(d,4*i);for(var m=0;m<4;++m)f[m]=f[m]/E;n.set(f,4*i)}}}return new t(n)},O(t,[{key:"position",get:function(){return new I(this.data[12],this.data[13],this.data[14])}}]),t}(),L=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),this.alpha=r,this._buffer=new Float32Array([t,e,n])}var e=t.prototype;return e.rgbBuffer=function(){return this._buffer},e.buffer=function(){return new Float32Array([this.red,this.green,this.blue,this.alpha])},t.fromHex=function(e){void 0===e&&(e="000000"),(4==e.length||7==e.length||9==e.length)&&(e=e.substring(1,e.length)),3==e.length&&(e=e.split("").map(function(t){return t+t}).join(""));var n=parseInt(e,16);return 6==e.length?new t((n>>16)/255,(n>>8&255)/255,(255&n)/255):new t((n>>24&255)/255,(n>>16&255)/255,(n>>8&255)/255,(255&n)/255)},t.fromInt=function(e){return void 0===e&&(e=0),e<0&&(e=0),new t((e>>16&255)/255,(e>>8&255)/255,(255&e)/255)},t.fromVec3=function(e){return new t(e.x,e.y,e.z)},t.mix=function(e,n,r){return new t(e.red*r+n.red*(1-r),e.green*r+n.green*(1-r),e.blue*r+n.blue*(1-r),e.alpha*r+n.alpha*(1-r))},t.isValid=function(t){return/^#?([0-9A-Fa-f]){6,8}$/i.test(t)},O(t,[{key:"red",get:function(){return this._buffer[0]}},{key:"green",get:function(){return this._buffer[1]}},{key:"blue",get:function(){return this._buffer[2]}},{key:"rgba",get:function(){return"rgba("+255*this.red+","+255*this.green+","+255*this.blue+","+this.alpha+")"}},{key:"code",get:function(){var t=function(t){var e=Math.floor(255*t).toString(16);return(e=1==e.length?"0"+e:e).length>2?e.substr(0,2):e};return"#"+t(this.red)+t(this.green)+t(this.blue)+t(this.alpha)}}]),t}(),R=function(){function t(){}return O(t,null,[{key:"placeFontSize",get:function(){return 12}},{key:"maxTiltIntersectWithScreen",get:function(){return 90-T.fov*A.rad2Deg}}]),t}();R.none=-1,R.baseTileSize=256,R.minLatitude=-85.0511287798066,R.maxLatitude=85.0511287798066,R.maxLongitude=180,R.minLongitude=-180,R.maxDegrees=360,R.radiusEarthMeters=6378137,R.halfEarthCircumFerenceInMeter=R.radiusEarthMeters*Math.PI,R.earthCircumFerenceInMeter=2*R.halfEarthCircumFerenceInMeter,R.tileCacheSize=512,R.baseMapLowestOrder=Number.MIN_SAFE_INTEGER,R.baseMapMiddleOrder=-1e6,R.buildingLayerOrder=0,R.userPOILayerOrder=1,R.pointGeoJsonWidth=32,R.pointGeoJsonHeight=32,R.placeSelectedIdPrefix="maplink-selected-place-",R.placeWidth=26,R.placeHeight=32,R.spritePadding=2,R.poiFontWeight="normal",R.poiMaxWidth=120,R.poiNumLine=2,R.poiDefaultColor=new L(.5,.6,.7),R.pointGeoJsonAnchor=[.5,1],R.infoWindowPadding=2,R.flingMinVelocity=-1e4,R.flingMaxVelocity=1e4,R.flingTimeConstant=150,R.flingSpeedMultiply=15,R.zoomSpeedMouseWheel=15,R.minDurationFlyTo=1e3,R.maxDurationFlyTo=13e3,R.maxBearingAngle=720,R.defaultMinZoom=3,R.defaultMinZoom3d=17,R.defaultMaxZoom=22,R.defaultMaxNativeZoom=19,R.geoJsonMinNativeZoom=20,R.vectorBuildingsMinZoom=17,R.tileExtend=4096,R.defaultAnimationDuration=300,R.defaultFlyZoom=17,R.minTilt=0,R.maxTilt2D=40,R.maxTilt3D=87,R.minTiltReduceFog=75,R.minTimeMoving=150,R.minTimeDoubleZoom=500,R.minTimeSpanTo=500,R.maxTimeSpanTo=4e3,R.skyboxMapBorderMinimum=.001,R.metersPerPixelAtLatitude=0,R.mapBackgroundColor2D=L.fromHex("#f2efe9"),R.mapBackgroundColor3D=L.fromHex("#e1e1e1"),R.satellitePOIColor=new L(1,1,1),R.satellitePOIHalo=new L(0,0,0),R.mapBackgroundScaleRatio=2e4,R.clusterMaxPointCount=1e6,R.biasMatrix=new w(new Float32Array([.5,0,0,0,0,.5,0,0,0,0,.5,0,.5,.5,.5,1])),R.FPS=1e3/15,R.buildingOverlayIdPrefix="_overlay",R.customBuildingType="custom_building",R.touchBoxSize=8,R.zoomStep=.25,R.distanceRatioToForceMoveCamera=3,R.gridIndexExtent=4096,R.gridIndexN=4,R.gridIndexPadding=0;var A=function(){};A.rad2Deg=180/Math.PI,A.deg2Rad=Math.PI/180,A.epsilon=1e-6;var T=function(){};T.fov=30*A.deg2Rad,T.nearPlane=.1,T.farPlane=1e3,T.height=15.5;var P=function(){function t(){}return t.getSkyColor=function(e){return t.skyColors[e]},t.getFogColor=function(e){return t.fogColors[e]},t.getLightColor=function(e){return t.lightColors[e]},t}();P.skyColors={Morning:L.fromHex("cdf9ff"),Noon:L.fromHex("0783f4"),AfterNoon:L.fromHex("243a8b"),Evening:L.fromHex("182863")},P.fogColors={Morning:L.fromHex("FAD8C4"),Noon:L.fromHex("FAFAFA"),AfterNoon:L.fromHex("FAA899"),Evening:L.fromHex("141c36")},P.lightColors={Morning:L.fromHex("#DE8989"),Noon:L.fromHex("#F8F8F8"),AfterNoon:L.fromHex("#BE321A"),Evening:L.fromHex("#1E0032")},(r=i||(i={}))[r.MARKER=0]="MARKER",r[r.CIRCLE=1]="CIRCLE",r[r.POLYLINE=2]="POLYLINE",r[r.POLYGON=3]="POLYGON",r[r.POI=4]="POI",r[r.BUILDING=5]="BUILDING",r[r.VECTOR_TILE_LAYER=6]="VECTOR_TILE_LAYER",r[r.BUILDING_QUERY_RESULT=7]="BUILDING_QUERY_RESULT",r[r.POLYLINE_DATA=8]="POLYLINE_DATA",r[r.POLYGON_DATA=9]="POLYGON_DATA",r[r.ICON=10]="ICON",r[r.LATLNG=11]="LATLNG",r[r.POINT=12]="POINT",r[r.CAMERA_POSITION=13]="CAMERA_POSITION",r[r.LATLNG_BOUNDS=14]="LATLNG_BOUNDS",r[r.MARKER_LABEL=15]="MARKER_LABEL",r[r.FEATURE=16]="FEATURE",r[r.TILE_FEATURE=17]="TILE_FEATURE",r[r.VECTOR_TILE_FEATURE=18]="VECTOR_TILE_FEATURE"}}]);